package com.yxm.sso.util.service;

import javax.servlet.http.HttpServletRequest;

import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

/**
 *<p>说明:跨域请求处理业务类</p>
 *@author:姚旭民
 *@date:2017-7-11 上午10:14:14
 */
public class TokenServiceImpl {
	public static String URL_SERVER = "http://192.168.3.78:8080/YxmSSO/test/httpClientVerify.action";
	public static String verification(HttpServletRequest request, String token) {
		try {
			String verifyUrl = URL_SERVER;
			HttpClient httpClient = new DefaultHttpClient();
			//serverName作为本应用标识
			HttpGet httpGet = new HttpGet(verifyUrl + "?token=" + token+"&localId="+request.getSession().getId());
			HttpResponse response = httpClient.execute(httpGet);
			int statusCode = response.getStatusLine().getStatusCode();
			
			if(statusCode == HttpStatus.SC_OK) {
				String result = EntityUtils.toString(response.getEntity(), "utf-8");
				//解析接送数据
			}
		} catch (Exception e) {
			
		}
		
		return "";
	}
}
